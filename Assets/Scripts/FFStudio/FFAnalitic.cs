using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using Facebook.Unity;
using ElephantSDK;

namespace FFStudio
{
    public class FFAnalitic : MonoBehaviour
    {
        private void Awake()
        {
            if (!FB.IsInitialized)
                FB.Init(OnFacebookInitialized, OnHideUnity);
            else
                FB.ActivateApp();

            gameObject.AddComponent<ElephantCore>();

            ElephantCore.onInitialized += OnElephantInitiliazed;
            ElephantCore.onRemoteConfigLoaded += OnElephantRemoveConfigLoaded;
            ElephantCore.onOpen += OnElephantOpen;
        }

        private void Start()
        {
            Elephant.Init(false, true);
        }

        void OnElephantInitiliazed()
        {
            Debug.Log("[FFAnalitic] Elephant initiliazed");
        }
        void OnElephantRemoveConfigLoaded()
        {
            Debug.Log("[FFAnalitic] Elephant Remote Config Loaded");
        }
        void OnElephantOpen(bool gdprRequired)
        {

        }
        void OnFacebookInitialized()
        {
            if (FB.IsInitialized)
            {
                FB.ActivateApp();
                Debug.Log("[FFAnalitic] Facebook initiliazed");
            }
            else
                Debug.Log("[FFAnalitic] Failed to initialize Facebook SDK");


            DontDestroyOnLoad(gameObject);

        }

        void OnHideUnity(bool hide)
        {

        }
    }
}